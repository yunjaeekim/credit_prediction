# 📚 재무제표를 통한 기업의 신용 등급 예측 프레임워크

## 소개
현재 기업의 신용등급 예측 분야에서는 재무제표의 데이터를 활용한 딥러닝 기반 분류 작업이 주를 이루고 있습니다. 이러한 현행 방식은 재무제표에 포함된 여러 테이블 형태의 데이터를 컬럼으로 변환하여 데이터프레임을 구성한 후, 이를 기반으로 신용등급을 분류하는 방식으로 진행되고 있습니다.

그러나 이러한 접근 방식은 재무제표의 핵심 구성 요소 중 하나인 주석 정보를 충분히 활용하지 못한다는 중대한 한계점을 가지고 있습니다. 주석에는 기업의 재무 상태와 경영 현황을 이해하는 데 필수적인 상세 정보들이 포함되어 있으며, 때로는 재무제표의 수치만으로는 파악하기 어려운 잠재적 리스크 요인들이 서술되어 있습니다.

이러한 한계를 극복하기 위해 저희는 OCR 기술을 활용하여 재무제표 전체를 텍스트 데이터로 변환하고, 이를 금융 특화 NLP 모델을 통해 분석하는 새로운 프레임워크를 제안하고자 합니다. 이는 재무제표의 모든 정보를 포괄적으로 활용할 수 있게 해주며, 특히 주석에 포함된 중요 정보들을 신용등급 예측에 반영할 수 있게 해줄 것입니다.

저희 프로젝트의 핵심 목적은 단순히 재무제표의 수치 데이터에만 의존하던 기존의 한계를 넘어, 주석을 포함한 재무제표 전체의 정보를 통합적으로 분석하여 더욱 정확하고 신뢰성 있는 신용등급 예측 모델을 개발하는 것입니다. 이를 통해 기업의 재무 건전성을 보다 정확하게 평가할 수 있을 것으로 기대됩니다.

## 🗂️ 데이터 수집
- 아래 url을 통해 신용 등급 확인
  - https://www.korearatings.com/cms/frCmnCon/index.do?MENU_ID=360

- 아래 url을 통해 해당 기업의 재무제표(사업 보고서) 다운
  - https://opendart.fss.or.kr/disclosureinfo/fnltt/singl/main.do  

## 🛠️ 전처리 과정

### processing.ipynb
- 재무제표 PDF를 각 페이지 당 jpg로 변환

### easyOCR.ipynb
- 기업의 각 jpg 파일을 easyOCR을 통해 전체 text로 변환
- 정규 표현식을 통해 예측에 의미 있는 표현만 json 파일로 변환

## 🤖 모델링 과정

### KR_Fin_BERT.ipynb

- Train과 Test의 분포 데이터 시각화
- Hugging Face에서 KR-Fin Bert 모델을 가져옴
- KR-Fin BERT의 금융 특화된 encoder를 통해 인코딩
- Fin BERT 논문에서 얘기한 것 처럼 BERT 모델은 동결 시키고 [CLS] 토큰을 가져와 Dense layer를 통해 확률 반환
- 반환 확률을 soft max 함수를 통해 label 예측


## 🎯 Fine-tuning
- 동결시킨 BERT 외에 마지막 2개의 layer만 fine-tuning 실행
- dense layer 역시 fine-tuning 실행
- 학습 데이터와 평가 데이터를 9:1 비율로 나누어 검증 실행
- batch size : 4 
- learning rate : 1e-5
- epoch : 5
- AdamW 사용, weight decay : 0.01

## 📝 한계점 
이번 연구를 진행하면서 가장 아쉬웠던 점은 데이터가 너무 부족했다는 것입니다. Google Colab의 GPU 리소스 한계로 인해 2020년도의 데이터만 활용할 수밖에 없었고, 그마저도 사업보고서와 신용등급을 함께 구할 수 있는 기업들의 데이터만 수집하다 보니 겨우 34개(훈련용 26개, 테스트용 8개)의 데이터만 확보할 수 있었습니다. 이렇게 적은 데이터로는 KR-FinBERT 모델을 제대로 fine-tuning하기 어려웠고, 결국 모델의 성능도 기대에 미치지 못했습니다.

만약 더 높은 성능의 GPU를 활용할 수 있다면 2020년부터 2023년까지의 데이터를 모두 활용할 수 있을 것이고, 그렇다면 약 120~140개 정도의 데이터를 확보할 수 있을 것으로 예상됩니다. 물론 이 정도로도 딥러닝 모델을 학습시키기에는 여전히 부족하지만, 지금보다는 더 나은 결과를 얻을 수 있을 것 같습니다.

앞으로는 분기별 보고서나 다른 공시자료들도 활용하는 방안을 고려해볼 수 있을 것 같습니다. 또한 텍스트 데이터뿐만 아니라 재무지표 같은 수치 데이터도 함께 활용한다면, 모델의 성능을 한층 더 끌어올릴 수 있지 않을까 기대해봅니다.
